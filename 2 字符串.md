# 概述
对于C字符串，nginx代码使用无符号字符类型的指针u_char *。

nginx字符串类型ngx_str_t 的定义是下面这样的：
```c
typedef struct {
    size_t      len;
    u_char     *data;
} ngx_str_t;
```
len字段保存字符串长度，data字段保存字符串数据。
保存在ngx_str_t中的字符串在len个字节之后可能是或不是以null结尾。
大多数情况下不是的。
然而，在代码的某些部分，（例如解析配置文件）。ngx_str_t对象是以null结尾的，以简化字符串比较，使这些字符串更容易地传递给系统调用。

在nginx中，提供了很多字符串操作。这些函数声明在`src/core/ngx_string.h`中。其中一些封装了标准c函数。
- ngx_strcmp()
- ngx_strncmp()
- ngx_strstr()
- ngx_strlen()
- ngx_strchr()
- ngx_memcmp()
- ngx_memset()
- ngx_memcpy()
- ngx_memmove()

一些nginx专有的函数:

- ngx_memzero() 用零填充内存
- ngx_cpymem() 和ngx_memcpy()一样, 但返回了最终目的地址。这可以方便地连续附加多个字符串。
- ngx_movemem() 和ngx_memmove()一样, 但返回了最终目的地址。
- ngx_strlchr() 在字符串中搜索一个字符，，由两个指针分割。

一些大小写转换和比较函数:

- ngx_tolower()
- ngx_toupper()
- ngx_strlow()
- ngx_strcasecmp()
- ngx_strncasecmp()

# 格式化
nginx提供了很多格式化函数。这些函数支持nginx专有的类型。
- ngx_sprintf(buf, fmt, ...)
- ngx_snprintf(buf, max, fmt, ...)
- ngx_slrintf(buf, last, fmt, ...)
- ngx_vslprint(buf, last, fmt, args)
- ngx_vsnprint(buf, max, fmt, args)

这些函数支持的格式化选项的完整列表，可以在`src/core/ngx_string.c`中找到。

这是其中的几个：
```
%O — off_t
%T — time_t
%z — size_t
%i — ngx_int_t
%p — void *
%V — ngx_str_t *
%s — u_char * (null-terminated)
%*s — size_t + u_char *
```
`u`修饰符代表无符号类型，`X`或`x`将输出转换为十六进制。

例如：
```c
u_char     buf[NGX_INT_T_LEN];
size_t     len;
ngx_int_t  n;

/* set n here */

len = ngx_sprintf(buf, "%ui", n) — buf;
```
# 数字转换
nginx实现了一些数字转换函数。
- ngx_atoi(line, n) — 将给定长度的字符串转换为ngx_int_t类型的正整数。错误返回NGX_ERROR。
- ngx_atosz(line, n) — 相同的ssize_t类型。
- ngx_atoof(line, n) — 相同的off_t类型。
- ngx_atotm(line, n) — 相同的time_t类型。
- ngx_atofp(line, n, point) — 将给定长度的固定点浮点数转换为ngx_int_t类型的正整数。 
结果是向左移动小数位数. 数字的字符串表示预期不超过分数位数. 错误返回NGX_ERROR。例如，ngx_atofp("10.5", 4, 2)返回1050。
- ngx_hextoi(line, n) — 将正整数的十六进制表示形式转换为ngx_int_t. 错误返回NGX_ERROR。

# 正则表达式